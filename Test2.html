<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Inventory Manager</title>
  <style>
    table, th, td {
      border: 1px solid black;
      border-collapse: collapse;
    }
    th, td {
      padding: 4px;
    }
    .hidden {
      display: none;
    }
    input.qty-input {
      width: 4ch;
    }
  </style>
</head>
<body>
  <h1>Inventory Manager</h1>
  <button onclick="exportToCSV()">Export</button>
  <button onclick="importFromCSV()">Import</button>
  <button onclick="showInventorySection()">Inventory</button>
  <button onclick="showDiscountSection()">Discounts</button>  <section id="inventory-section">
    <h2>Add Product</h2>
    <form id="product-form">
      <input type="text" id="product-name" placeholder="Product Name" required />
      <select id="product-gender">
        <option value="Men">Men</option>
        <option value="Women">Women</option>
        <option value="Unisex">Unisex</option>
      </select>
      <select id="product-category">
        <option value="Tops">Tops</option>
        <option value="Bottoms">Bottoms</option>
        <option value="Accessories">Accessories</option>
      </select>
      <button type="submit">Add Product</button>
    </form><div id="product-table"></div>

  </section>  <section id="discount-section" class="hidden">
    <h2>Add Discount</h2>
    <form id="discount-form">
      <input type="text" id="discount-name" placeholder="Discount Name" required />
      <select id="discount-type">
        <option value="Percentage">Percentage</option>
        <option value="Flat">Flat</option>
      </select>
      <input type="number" id="discount-value" placeholder="Value" required />
      <button type="submit">Add Discount</button>
    </form><div id="discount-table"></div>

  </section>  <script>
    let products = [];
    let discounts = [];

    const sizeList = ['XS', 'S', 'M', 'L', 'XL', '2XL', '3XL', '4XL'];

    function renderProductTable() {
      const grouped = products.reduce((acc, cur) => {
        if (!acc[cur.category]) acc[cur.category] = [];
        acc[cur.category].push(cur);
        return acc;
      }, {});

      let html = '';
      for (const cat in grouped) {
        html += `<h3>${cat}</h3><table><tr><th>Product</th><th>Gender</th>${sizeList.map(s => `<th>${s}</th>`).join('')}<th>Actions</th></tr>`;
        grouped[cat].forEach((p, i) => {
          const sizes = sizeList.map(s => `<td><input class="qty-input" type="number" value="${p.sizes[s] || ''}" data-size="${s}" data-id="${p.id}" onchange="updateSize(event)"></td>`).join('');
          const genderOptions = ['Men', 'Women', 'Unisex'].map(opt => `<option value="${opt}" ${opt === p.gender ? 'selected' : ''}>${opt}</option>`).join('');
          html += `<tr data-id="${p.id}">
            <td><span class="name-display">${p.name}</span><input class="hidden name-edit" value="${p.name}"/></td>
            <td><span class="gender-display">${p.gender}</span><select class="hidden gender-edit">${genderOptions}</select></td>
            ${sizes}
            <td>
              <button onclick="toggleEdit(this)">Edit</button>
              <button class="hidden" onclick="saveEdit(this)">Save</button>
              <button onclick="deleteProduct(${p.id})">Delete</button>
            </td>
          </tr>`;
        });
        html += '</table>';
      }
      document.getElementById('product-table').innerHTML = html;
    }

    function renderDiscountTable() {
      const grouped = discounts.reduce((acc, cur) => {
        if (!acc[cur.type]) acc[cur.type] = [];
        acc[cur.type].push(cur);
        return acc;
      }, {});

      let html = '';
      for (const type in grouped) {
        html += `<h3>${type}</h3><table><tr><th>Name</th><th>Value</th><th>Actions</th></tr>`;
        grouped[type].forEach((d, i) => {
          html += `<tr>
            <td><span class="name-display">${d.name}</span><input class="hidden name-edit" value="${d.name}"/></td>
            <td><span class="value-display">${d.value}</span><input class="hidden value-edit" type="number" value="${d.value}"/></td>
            <td>
              <button onclick="toggleDiscountEdit(this)">Edit</button>
              <button class="hidden" onclick="saveDiscountEdit(this)">Save</button>
              <button onclick="deleteDiscount(${d.id})">Delete</button>
            </td>
          </tr>`;
        });
        html += '</table>';
      }
      document.getElementById('discount-table').innerHTML = html;
    }

    function toggleEdit(btn) {
      const row = btn.closest('tr');
      row.querySelector('.name-display').classList.add('hidden');
      row.querySelector('.name-edit').classList.remove('hidden');
      row.querySelector('.gender-display').classList.add('hidden');
      row.querySelector('.gender-edit').classList.remove('hidden');
      btn.classList.add('hidden');
      row.querySelector('button:nth-child(2)').classList.remove('hidden');
    }

    function saveEdit(btn) {
      const row = btn.closest('tr');
      const id = parseInt(row.dataset.id);
      const name = row.querySelector('.name-edit').value;
      const gender = row.querySelector('.gender-edit').value;
      const prod = products.find(p => p.id === id);
      prod.name = name;
      prod.gender = gender;
      renderProductTable();
    }

    function updateSize(e) {
      const size = e.target.dataset.size;
      const id = parseInt(e.target.dataset.id);
      const val = parseInt(e.target.value);
      const prod = products.find(p => p.id === id);
      prod.sizes[size] = val;
    }

    function deleteProduct(id) {
      products = products.filter(p => p.id !== id);
      renderProductTable();
    }

    function deleteDiscount(id) {
      discounts = discounts.filter(d => d.id !== id);
      renderDiscountTable();
    }

    function toggleDiscountEdit(btn) {
      const row = btn.closest('tr');
      row.querySelector('.name-display').classList.add('hidden');
      row.querySelector('.name-edit').classList.remove('hidden');
      row.querySelector('.value-display').classList.add('hidden');
      row.querySelector('.value-edit').classList.remove('hidden');
      btn.classList.add('hidden');
      row.querySelector('button:nth-child(2)').classList.remove('hidden');
    }

    function saveDiscountEdit(btn) {
      const row = btn.closest('tr');
      const name = row.querySelector('.name-edit').value;
      const value = parseFloat(row.querySelector('.value-edit').value);
      const id = parseInt(discounts.find(d => d.name === row.querySelector('.name-display').textContent).id);
      const disc = discounts.find(d => d.id === id);
      disc.name = name;
      disc.value = value;
      renderDiscountTable();
    }

    document.getElementById('product-form').addEventListener('submit', e => {
      e.preventDefault();
      const name = document.getElementById('product-name').value;
      const gender = document.getElementById('product-gender').value;
      const category = document.getElementById('product-category').value;
      const id = Date.now();
      products.push({ id, name, gender, category, sizes: {} });
      e.target.reset();
      renderProductTable();
    });

    document.getElementById('discount-form').addEventListener('submit', e => {
      e.preventDefault();
      const name = document.getElementById('discount-name').value;
      const type = document.getElementById('discount-type').value;
      const value = parseFloat(document.getElementById('discount-value').value);
      const id = Date.now();
      discounts.push({ id, name, type, value });
      e.target.reset();
      renderDiscountTable();
    });

    function showInventorySection() {
      document.getElementById('inventory-section').classList.remove('hidden');
      document.getElementById('discount-section').classList.add('hidden');
    }

    function showDiscountSection() {
      document.getElementById('discount-section').classList.remove('hidden');
      document.getElementById('inventory-section').classList.add('hidden');
    }

    function exportToCSV() {
      alert('Export not implemented yet.');
    }

    function importFromCSV() {
      alert('Import not implemented yet.');
    }
  </script></body>
</html>