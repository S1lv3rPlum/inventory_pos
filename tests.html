<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Product Inventory</title>
  <style>
    body { font-family: sans-serif; padding: 1rem; }
    .row { display: flex; flex-wrap: wrap; gap: 0.5rem; margin-bottom: 1rem; }
    label { display: flex; flex-direction: column; }
    table { width: 100%; border-collapse: collapse; margin-top: 1rem; }
    th, td { border: 1px solid #ccc; padding: 0.5rem; text-align: center; }
    th { background: #f0f0f0; }
    .category-row { background-color: #d0e0f0; font-weight: bold; text-align: left; }
    .gender-toggle input[type="checkbox"] { margin: 0 0.25rem; }
  </style>
</head>
<body>
  <h1>Add Product</h1>
  <div class="row">
    <label>Category <input id="category" /></label>
    <label>Product Name <input id="name" /></label>
    <label><input type="checkbox" id="hasSizes" /> Has Sizes</label>
    <label class="gender-toggle">Gender:
      <span>
        <label><input type="checkbox" id="genderM" /> M</label>
        <label><input type="checkbox" id="genderF" /> F</label>
      </span>
    </label>
    <button onclick="addProduct()">Add Product</button>
  </div>  <table id="productTable">
    <thead>
      <tr>
        <th>Category</th>
        <th>Name</th>
        <th>Gender</th>
        <th>Size</th>
        <th>Qty</th>
        <th>Edit</th>
        <th>Delete</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>  <script>
    let products = [];
    const sizes = ["S", "M", "L", "XL", "2XL"];

    const genderM = document.getElementById("genderM");
    const genderF = document.getElementById("genderF");

    genderM.addEventListener("change", () => {
      if (genderM.checked) genderF.checked = false;
    });
    genderF.addEventListener("change", () => {
      if (genderF.checked) genderM.checked = false;
    });

    function addProduct() {
      const category = document.getElementById("category").value.trim();
      const name = document.getElementById("name").value.trim();
      const hasSizes = document.getElementById("hasSizes").checked;
      const gender = genderM.checked ? "M" : genderF.checked ? "F" : "";

      if (!category || !name) return alert("Fill in category and name");

      const itemsToAdd = hasSizes ? sizes.map(size => ({ size, qty: 0 })) : [{ size: "", qty: 0 }];

      itemsToAdd.forEach(({ size, qty }) => {
        products.push({ category, name, gender, size, qty });
      });

      renderTable();

      document.getElementById("category").value = "";
      document.getElementById("name").value = "";
      document.getElementById("hasSizes").checked = false;
      genderM.checked = false;
      genderF.checked = false;
    }

    function renderTable() {
      const tbody = document.querySelector("#productTable tbody");
      tbody.innerHTML = "";

      const sorted = [...products].sort((a, b) => {
        return a.category.localeCompare(b.category) || a.name.localeCompare(b.name);
      });

      let lastCategory = null;
      sorted.forEach((item, index) => {
        if (item.category !== lastCategory) {
          const catRow = document.createElement("tr");
          catRow.classList.add("category-row");
          const catCell = document.createElement("td");
          catCell.colSpan = 7;
          catCell.textContent = item.category;
          catRow.appendChild(catCell);
          tbody.appendChild(catRow);
          lastCategory = item.category;
        }

        const row = document.createElement("tr");
        row.innerHTML = `
          <td>${item.category}</td>
          <td>${item.name}</td>
          <td>
            <label><input type="checkbox" onchange="toggleGender(${index}, 'M')" ${item.gender === 'M' ? 'checked' : ''}/>M</label>
            <label><input type="checkbox" onchange="toggleGender(${index}, 'F')" ${item.gender === 'F' ? 'checked' : ''}/>F</label>
          </td>
          <td>${item.size}</td>
          <td><input type="number" value="${item.qty}" onchange="updateQty(${index}, this.value)" style="width:60px"/></td>
          <td><button onclick="editRow(${index})">Edit</button></td>
          <td><button onclick="deleteRow(${index})">Delete</button></td>
        `;
        tbody.appendChild(row);
      });
    }

    function updateQty(index, value) {
      products[index].qty = parseInt(value) || 0;
    }

    function toggleGender(index, val) {
      products[index].gender = products[index].gender === val ? "" : val;
      renderTable();
    }

    function editRow(index) {
      const name = prompt("Edit name:", products[index].name);
      if (name) {
        products.forEach(p => {
          if (p.name === products[index].name && p.category === products[index].category) {
            p.name = name;
          }
        });
        renderTable();
      }
    }

    function deleteRow(index) {
      const nameToDelete = products[index].name;
      const categoryToDelete = products[index].category;
      products = products.filter(p => !(p.name === nameToDelete && p.category === categoryToDelete));
      renderTable();
    }
  </script></body>
</html>