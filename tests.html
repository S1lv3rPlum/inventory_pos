<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Inventory Management</title>
  <style>
    table, th, td {
      border: 1px solid black;
      border-collapse: collapse;
      padding: 8px;
    }
    th {
      background-color: #f2f2f2;
    }
    input[type="number"]:disabled, input[type="text"]:disabled {
      background-color: #f9f9f9;
      border: none;
    }
    .gender-checkboxes input[type="checkbox"]:disabled {
      pointer-events: none;
    }
  </style>
</head>
<body><h2>Inventory Management</h2><form id="addProductForm">
  <label>Category: <input type="text" id="category" required></label>
  <label>Product Name: <input type="text" id="productName" required></label><br><br>
  <label><input type="checkbox" class="size" value="S"> S</label>
  <label><input type="checkbox" class="size" value="M"> M</label>
  <label><input type="checkbox" class="size" value="L"> L</label>
  <label><input type="checkbox" class="size" value="XL"> XL</label>
  <label><input type="checkbox" class="size" value="XXL"> XXL</label><br><br>
  <button type="submit">Add Product</button>
</form><table id="inventoryTable">
  <thead>
    <tr>
      <th>Category</th>
      <th>Product Name</th>
      <th>Gender</th>
      <th>Sizes</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody></tbody>
</table><script>
  const form = document.getElementById('addProductForm');
  const tableBody = document.querySelector('#inventoryTable tbody');
  let inventory = [];

  form.addEventListener('submit', e => {
    e.preventDefault();
    const category = document.getElementById('category').value;
    const productName = document.getElementById('productName').value;
    const sizes = [...document.querySelectorAll('.size:checked')].map(cb => cb.value);
    if (sizes.length === 0) return alert("Please select at least one size.");

    const product = {
      category,
      productName,
      gender: '',
      sizes: sizes.reduce((acc, size) => { acc[size] = 0; return acc; }, {})
    };

    inventory.push(product);
    sortAndRender();
    form.reset();
  });

  function sortAndRender() {
    tableBody.innerHTML = '';
    const sorted = [...inventory].sort((a, b) => {
      if (a.category !== b.category) return a.category.localeCompare(b.category);
      return a.productName.localeCompare(b.productName);
    });

    sorted.forEach((item, index) => {
      const row = tableBody.insertRow();

      const catCell = row.insertCell();
      catCell.textContent = item.category;

      const nameCell = row.insertCell();
      const nameInput = document.createElement('input');
      nameInput.type = 'text';
      nameInput.value = item.productName;
      nameInput.disabled = true;
      nameCell.appendChild(nameInput);

      const genderCell = row.insertCell();
      genderCell.className = 'gender-checkboxes';
      const maleCB = document.createElement('input');
      maleCB.type = 'checkbox';
      maleCB.disabled = true;
      maleCB.checked = item.gender === 'M';
      const femaleCB = document.createElement('input');
      femaleCB.type = 'checkbox';
      femaleCB.disabled = true;
      femaleCB.checked = item.gender === 'F';

      maleCB.addEventListener('change', () => {
        if (maleCB.checked) {
          femaleCB.checked = false;
        }
      });

      femaleCB.addEventListener('change', () => {
        if (femaleCB.checked) {
          maleCB.checked = false;
        }
      });

      genderCell.append('M:', maleCB, ' F:', femaleCB);

      const sizesCell = row.insertCell();
      Object.keys(item.sizes).forEach(size => {
        const sizeInput = document.createElement('input');
        sizeInput.type = 'number';
        sizeInput.value = item.sizes[size];
        sizeInput.disabled = true;
        sizeInput.dataset.size = size;
        sizeInput.style.width = '50px';
        sizesCell.append(`${size}: `, sizeInput, ' ');
      });

      const actionsCell = row.insertCell();
      const editBtn = document.createElement('button');
      editBtn.textContent = 'Edit';
      let isEditing = false;

      editBtn.addEventListener('click', () => {
        isEditing = !isEditing;
        nameInput.disabled = !isEditing;
        maleCB.disabled = !isEditing;
        femaleCB.disabled = !isEditing;
        sizesCell.querySelectorAll('input').forEach(inp => inp.disabled = !isEditing);

        if (!isEditing) {
          // Save changes
          item.productName = nameInput.value;
          item.gender = maleCB.checked ? 'M' : (femaleCB.checked ? 'F' : '');
          sizesCell.querySelectorAll('input').forEach(inp => {
            item.sizes[inp.dataset.size] = parseInt(inp.value) || 0;
          });
          sortAndRender();
        } else {
          editBtn.textContent = 'Save';
        }

        if (!isEditing) editBtn.textContent = 'Edit';
      });

      actionsCell.appendChild(editBtn);
    });
  }
</script></body>
</html>