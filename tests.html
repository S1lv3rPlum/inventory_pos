<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Inventory Table</title>
</head>
<body>
  <h2>Inventory</h2>
  <table border="1" id="inventoryTable">
    <thead>
      <tr>
        <th>Category</th>
        <th>Product Name</th>
        <th>Image</th>
        <th>Size</th>
        <th>Quantity</th>
      </tr>
    </thead>
    <tbody id="inventoryTableBody"></tbody>
  </table>

  <script>
    // TEMP: Seed sample data so the table has something to show
    if (!localStorage.getItem("products")) {
      const exampleData = {
        "Shirts": {
          "Polo": {
            "sizes": {
              "S": 2,
              "M": 1
            },
            "image": ""  // can paste a real data:image/... here
          },
          "Tee": {
            "sizes": {
              "L": 4
            },
            "image": ""
          }
        }
      };
      localStorage.setItem("products", JSON.stringify(exampleData));
    }

    window.addEventListener('DOMContentLoaded', function () {
      const inventory = JSON.parse(localStorage.getItem('products')) || {};
      const tableBody = document.getElementById('inventoryTableBody');
      tableBody.innerHTML = '';

      for (const category in inventory) {
        const products = inventory[category];

        for (const productName in products) {
          const product = products[productName];
          const sizes = product.sizes || {};
          const imageURL = product.image || '';

          for (const size in sizes) {
            const qty = sizes[size];

            const row = document.createElement('tr');
            row.innerHTML = `
              <td>${category}</td>
              <td>${productName}</td>
              <td>${imageURL ? `<img src="${imageURL}" style="width:50px;">` : 'No Image'}</td>
              <td>${size}</td>
              <td>${qty}</td>
            `;
            tableBody.appendChild(row);
          }
        }
      }
    });
  </script>
</body>
</html>